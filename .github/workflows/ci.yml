on:
 - pull_request

jobs:
  build:
    name: Build
    runs-on: ubuntu-18.04
    steps:
     - uses: actions/checkout@v2
     - uses: cachix/install-nix-action@v11
     - uses: cachix/cachix-action@v6
       with:
         name: wire-server
         signingKey: '${{ secrets.CACHIX_SIGNING_KEY }}'
         authToken: '${{ secrets.CACHIX_AUTH_TOKEN }}'
     - run: ./ci.sh
     - uses: actions/upload-artifact@v2
       with:
         name: debs
         path: static/debs/*
